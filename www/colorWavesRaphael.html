<!DOCTYPE html>
<html>
  <head>
    <title>Color Waves - Toxiclibs.js</title>
    <link rel="stylesheet" href="stylesheets/style.css">
    <script src="javascripts/config.js"></script>
    <script data-main="../main" src="javascripts/vendor/require.js"></script>
    <script src="javascripts/vendor/raphael-min.js"></script>
  </head>
  <body>
    <div id="example-container"></div>
    <script src="https://raw.github.com/hapticdata/toxiclibsjs/develop/build/toxiclibs.min.js"></script>
    <script>window.onload = function(e){
		
		
	var columns = 6, rows = 4;
	var columnWidth, rowHeight;
	var circles = [];
	var translateX = 100, translateY = 100;
	var width = window.innerWidth;
	var height = 600;
	var container = document.getElementById("example-container");

	var notepad = Raphael(container,width,height);


	columnWidth = width / (columns-1);
	rowHeight = height / (rows-1);

	for(var r=0;r<rows;r++){ 
		for(var c=0;c<columns;c++){
			var circle = notepad.circle(c*columnWidth+translateX,r*rowHeight+translateY,1,1);
			circle.attr({fill: "#dddddd", "stroke": "#dddddd", "opacity":0.5,"scale": 4.0});
			circles.push(circle); 
		}
	}

	document.addEventListener("mousemove",function(event){
		updateFor(event.pageX,event.pageY);
	},false);

	document.addEventListener("touchmove",function(event){
		event.preventDefault();
		updateFor(event.touches[0].pageX,event.touches[0].pageY);
	},false);

	function updateFor(activeX,activeY){
		var x = activeX - container.offsetLeft;
		var y = activeY - container.offsetTop;

		var l = circles.length;
		for(var i=0;i<l;i++){
			var circle = circles[i];
			var box = circle.getBBox();
			var dx = x - box.x;
			var dy = y - box.y;
			var distance = Math.sqrt((dx * dx) + (dy * dy));
			var color = toxi.color.TColor.newHSV(distance/width,0.5,1.0);

			var rgba = "rgba("+(color.red()*255)+","+(color.green()*255)+","+(color.blue()*255)+","+color.alpha()+")";
			circle.attr({"fill": rgba, "scale":distance*0.25});
		}
	}
}</script>
    <section id="waist">
      <nav id="navigation">
        <ul>
          <li class="source selected"><a href="#">Source</a></li>
          <li><a href="#">Toxiclibs.js</a></li>
          <li class="examples"><a href="#">Examples</a></li>
        </ul>
      </nav>
    </section>
    <section id="pagelet">  <div class="annotated-source">     <div class="background"></div>     <table cellpadding="0" cellspacing="0">       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    
    
  <span class="kd">var</span> <span class="nx">columns</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">rows</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">columnWidth</span><span class="p">,</span> <span class="nx">rowHeight</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">circles</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">translateX</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">translateY</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;example-container&quot;</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">notepad</span> <span class="o">=</span> <span class="nx">Raphael</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span><span class="nx">width</span><span class="p">,</span><span class="nx">height</span><span class="p">);</span>


  <span class="nx">columnWidth</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">/</span> <span class="p">(</span><span class="nx">columns</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="nx">rowHeight</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">/</span> <span class="p">(</span><span class="nx">rows</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">r</span><span class="o">&lt;</span><span class="nx">rows</span><span class="p">;</span><span class="nx">r</span><span class="o">++</span><span class="p">){</span> 
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">columns</span><span class="p">;</span><span class="nx">c</span><span class="o">++</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">notepad</span><span class="p">.</span><span class="nx">circle</span><span class="p">(</span><span class="nx">c</span><span class="o">*</span><span class="nx">columnWidth</span><span class="o">+</span><span class="nx">translateX</span><span class="p">,</span><span class="nx">r</span><span class="o">*</span><span class="nx">rowHeight</span><span class="o">+</span><span class="nx">translateY</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
      <span class="nx">circle</span><span class="p">.</span><span class="nx">attr</span><span class="p">({</span><span class="nx">fill</span><span class="o">:</span> <span class="s2">&quot;#dddddd&quot;</span><span class="p">,</span> <span class="s2">&quot;stroke&quot;</span><span class="o">:</span> <span class="s2">&quot;#dddddd&quot;</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span><span class="s2">&quot;scale&quot;</span><span class="o">:</span> <span class="mf">4.0</span><span class="p">});</span>
      <span class="nx">circles</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span> 
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;mousemove&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">updateFor</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span><span class="p">,</span><span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span><span class="p">);</span>
  <span class="p">},</span><span class="kc">false</span><span class="p">);</span>

  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;touchmove&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">updateFor</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageX</span><span class="p">,</span><span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageY</span><span class="p">);</span>
  <span class="p">},</span><span class="kc">false</span><span class="p">);</span>

  <span class="kd">function</span> <span class="nx">updateFor</span><span class="p">(</span><span class="nx">activeX</span><span class="p">,</span><span class="nx">activeY</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">activeX</span> <span class="o">-</span> <span class="nx">container</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">activeY</span> <span class="o">-</span> <span class="nx">container</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">circles</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">circles</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="kd">var</span> <span class="nx">box</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">getBBox</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">box</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">box</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">distance</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">((</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">));</span>
      <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">toxi</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">TColor</span><span class="p">.</span><span class="nx">newHSV</span><span class="p">(</span><span class="nx">distance</span><span class="o">/</span><span class="nx">width</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">1.0</span><span class="p">);</span>

      <span class="kd">var</span> <span class="nx">rgba</span> <span class="o">=</span> <span class="s2">&quot;rgba(&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">red</span><span class="p">()</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">green</span><span class="p">()</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">blue</span><span class="p">()</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nx">color</span><span class="p">.</span><span class="nx">alpha</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">;</span>
      <span class="nx">circle</span><span class="p">.</span><span class="nx">attr</span><span class="p">({</span><span class="s2">&quot;fill&quot;</span><span class="o">:</span> <span class="nx">rgba</span><span class="p">,</span> <span class="s2">&quot;scale&quot;</span><span class="o">:</span><span class="nx">distance</span><span class="o">*</span><span class="mf">0.25</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div></section>
    <footer></footer>
  </body>
</html>